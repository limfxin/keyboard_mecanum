# 文件清单

## 📁 已创建的文件

### 核心代码文件

```
keyboard_mecanum/
├── __init__.py                    # Python包初始化文件
├── keyboard_control_node.py       # 长按式键控节点 (主要功能)
└── qr_scanner_node.py             # 二维码识别节点 (相机功能)
```

### 启动配置文件

```
launch/
├── keyboard_control_launch.py     # 仅启动键控
├── qr_scanner_launch.py           # 仅启动二维码识别
└── full_system_launch.py          # 启动完整系统（键控+二维码）
```

### ROS2包配置文件

```
resource/
└── keyboard_mecanum               # 空标记文件

package.xml                        # ROS2包元数据
setup.py                          # Python包安装配置
setup.cfg                         # 安装脚本配置
```

### 脚本文件

```
install.sh                        # 自动安装脚本（树莓派）
test_system.sh                    # 交互式测试脚本
```

### 文档文件

```
readme.md                         # 主文档（详细技术文档）
README.md                         # 同上（大写）
使用指南.md                        # 快速使用指南
项目说明.md                        # 项目结构和设计说明
ROS2_JAZZY说明.md                 # ROS2 Jazzy版本特别说明
快速参考.txt                       # 快速参考卡片（可打印）
文件清单.md                        # 本文件
```

### 参考代码（保留原样）

```
yahboomcar_ctrl_ref/              # 开源参考代码
├── yahboomcar_ctrl/
│   ├── __init__.py
│   ├── yahboom_joy_R2.py
│   ├── yahboom_joy.py
│   └── yahboom_keyboard.py       # 参考的键控代码
├── launch/
│   └── yahboomcar_joy_launch.py
├── test/
│   ├── test_copyright.py
│   ├── test_flake8.py
│   └── test_pep257.py
├── resource/
│   └── yahboomcar_ctrl
├── package.xml
├── setup.py
└── setup.cfg
```

---

## 📊 文件统计

| 类型 | 数量 |
|-----|------|
| Python节点 | 2 个 |
| Launch文件 | 3 个 |
| 配置文件 | 3 个 |
| 脚本文件 | 2 个 |
| 文档文件 | 7 个 |
| 参考代码 | 保留原样 |

---

## 🎯 核心文件说明

### 1. keyboard_control_node.py
**功能**: 长按式键控节点
- 按键到速度的映射
- 麦轮横移支持（a/d键）
- 舵机S1控制（1/2/3键）
- 速度实时调整
- 发布 `/cmd_vel` 和 `/servo_s1`

**关键技术**:
- `termios` - 终端控制
- `select` - 非阻塞键盘输入
- 50ms超时实现长按检测

### 2. qr_scanner_node.py
**功能**: 二维码识别节点
- 树莓派相机接口（rpicam-vid）
- OpenCV二维码检测
- 去重发布机制
- 优雅的资源清理

**关键技术**:
- `subprocess` - 进程管理
- `cv2.QRCodeDetector` - 二维码检测
- 命名管道（FIFO）传输视频流

### 3. Launch文件
**keyboard_control_launch.py**
- 启动键控节点
- 配置速度限制参数
- 使用xterm新开终端

**qr_scanner_launch.py**
- 启动二维码识别节点
- 配置相机参数

**full_system_launch.py**
- 同时启动键控和二维码识别
- 适合边遥控边识别的场景

---

## 📝 文档阅读顺序

### 新手入门
1. `快速参考.txt` - 快速查看按键和命令
2. `使用指南.md` - 快速开始和常见问题
3. `readme.md` - 详细功能说明

### 深入学习
1. `项目说明.md` - 理解项目结构
2. `keyboard_control_node.py` - 阅读键控实现
3. `qr_scanner_node.py` - 阅读识别实现

### 参考查阅
1. `快速参考.txt` - 日常使用查询
2. `文件清单.md` - 本文件

---

## 🔄 与参考代码的对比

| 项目 | 开源参考 | 本系统 |
|-----|---------|--------|
| 控制模式 | 按一次持续 | 长按移动 |
| 横移支持 | 模拟（旋转） | 真正横移 |
| 舵机控制 | 无集成 | 集成（1/2/3键） |
| 相机功能 | 无 | 二维码识别 |
| 文档完善度 | 基础 | 完整 |

---

## ✅ 完整功能清单

### 键控功能
- [x] 长按移动控制
- [x] 松开自动停止
- [x] 前进/后退（i/,）
- [x] 左转/右转（j/l）
- [x] 斜向移动（u/o/m/.）
- [x] 左横移/右横移（a/d）
- [x] 速度实时调整（q/z/w/x/e/c）

### 舵机功能
- [x] S1左转（1键 = -45°）
- [x] S1中位（2键 = 0°）
- [x] S1右转（3键 = 45°）
- [x] 发布到 `/servo_s1` 话题

### 二维码功能
- [x] 实时识别
- [x] 自动去重
- [x] 发布到 `/qr_code` 话题
- [x] 树莓派相机优化

### ROS2集成
- [x] 标准ROS2包结构
- [x] Launch文件支持
- [x] 参数配置
- [x] 话题通信

### 工具和文档
- [x] 自动安装脚本
- [x] 交互式测试脚本
- [x] 完整文档（6个文档文件）
- [x] 快速参考卡片

---

## 📦 安装后的文件位置

```
~/ros2_ws/
├── src/
│   └── keyboard_mecanum/          # 源代码
│       ├── keyboard_mecanum/      # Python包
│       ├── launch/                # 启动文件
│       ├── resource/              # 资源文件
│       ├── package.xml
│       ├── setup.py
│       └── 文档...
│
├── build/
│   └── keyboard_mecanum/          # 编译产物
│
└── install/
    └── keyboard_mecanum/          # 安装后的文件
        ├── lib/
        │   └── keyboard_mecanum/
        │       ├── keyboard_control  # 可执行文件
        │       └── qr_scanner        # 可执行文件
        └── share/
            └── keyboard_mecanum/
                └── launch/           # 启动文件
```

---

## 🚀 快速导航

**想快速开始?**
→ 阅读 `使用指南.md` 或 `快速参考.txt`

**想了解技术细节?**
→ 阅读 `readme.md` 或 `项目说明.md`

**想修改代码?**
→ 查看 `keyboard_mecanum/` 目录下的Python文件

**遇到问题?**
→ 查看 `readme.md` 的故障排查部分

**想测试功能?**
→ 运行 `./test_system.sh`

---

## 🎉 项目完成状态

所有计划功能已全部完成！

- ✅ 长按式键控节点
- ✅ 麦轮横移支持
- ✅ 舵机控制集成
- ✅ 二维码识别节点
- ✅ ROS2包配置
- ✅ Launch文件
- ✅ 安装脚本
- ✅ 测试脚本
- ✅ 完整文档

**版本**: v1.0.0  
**创建日期**: 2024-11-22  
**状态**: ✅ 完成并可用

